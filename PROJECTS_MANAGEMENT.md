# üìö Gesti√≥n de Proyectos - MA Arquitectura

Esta gu√≠a explica c√≥mo agregar, editar y eliminar proyectos en el sitio web de MA Arquitectura.

## üìã √çndice

1. [Estructura del Sistema](#estructura-del-sistema)
2. [M√©todos para Editar Proyectos](#m√©todos-para-editar-proyectos)
3. [Estructura de un Proyecto](#estructura-de-un-proyecto)
4. [Deployment Autom√°tico](#deployment-autom√°tico)
5. [Soluci√≥n de Problemas](#soluci√≥n-de-problemas)

---

## üèóÔ∏è Estructura del Sistema

Los proyectos se almacenan en un archivo JSON:

```
src/assets/data/projects.json
```

Cada cambio en este archivo desencadena autom√°ticamente:

1. ‚úÖ Validaci√≥n del JSON
2. ‚úÖ Verificaci√≥n de campos requeridos
3. ‚úÖ Build de producci√≥n
4. ‚úÖ Deploy autom√°tico a Hostinger

---

## üõ†Ô∏è M√©todos para Editar Proyectos

### **M√©todo 1: Editar Directamente en GitHub (Recomendado)**

Es la forma m√°s f√°cil y segura:

1. Ve a tu repositorio en GitHub
2. Navega a `src/assets/data/projects.json`
3. Haz clic en el bot√≥n **"Edit"** (√≠cono de l√°piz)
4. Edita el JSON (agregar/modificar/eliminar proyectos)
5. Scroll hasta abajo y haz clic en **"Commit changes"**
6. GitHub Actions se ejecuta autom√°ticamente
7. En ~3-5 minutos, los cambios est√°n en producci√≥n

**‚úÖ Ventajas:**

- No requiere conocimientos t√©cnicos avanzados
- El navegador valida el JSON autom√°ticamente
- Historial completo de cambios
- F√°cil rollback si algo sale mal

---

### **M√©todo 2: Usar el Script Interactivo (Local)**

Para desarrolladores que trabajan localmente:

```bash
# Agregar un nuevo proyecto
npm run add:project

# Validar proyectos
npm run validate:projects

# Build con validaci√≥n
npm run build
```

**Flujo:**

1. Ejecuta `npm run add:project`
2. Responde las preguntas interactivas
3. El script genera el JSON autom√°ticamente
4. Valida que no haya duplicados
5. Commit y push a GitHub
6. GitHub Actions hace el deploy

---

### **M√©todo 3: Edici√≥n Manual del JSON**

Para usuarios avanzados:

1. Abre `src/assets/data/projects.json`
2. Edita el JSON manualmente
3. Ejecuta `npm run validate:projects` para verificar
4. Commit y push

---

## üìê Estructura de un Proyecto

### **Campos Requeridos** ‚úÖ

```json
{
  "id": "reforma-palermo", // ‚ö†Ô∏è √öNICO - genera la URL
  "name": "REFORMA PALERMO", // Nombre del proyecto
  "showImg": "v1747.../imagen.jpg", // Imagen principal (Cloudinary ID)
  "images": [
    // Array de im√°genes
    { "src": "v1747.../img1.jpg" },
    { "src": "v1747.../img2.jpg" }
  ]
}
```

### **Campos Opcionales** (Recomendados)

```json
{
  "nameEn": "PALERMO RENOVATION", // Nombre en ingl√©s
  "m2": "45", // Metros cuadrados
  "location": "Palermo", // Ubicaci√≥n
  "district": "CABA", // Distrito (CABA/GBA)
  "year": 2024, // A√±o del proyecto
  "description": "Descripci√≥n...", // Descripci√≥n espa√±ol
  "descriptionEn": "Description...", // Descripci√≥n ingl√©s
  "rowSpan": 2, // Filas en grid (1-3)
  "plantaSrc": "v1755.../planta.png", // Plano del proyecto
  "plantaPreviaSrc": "v1755.../previa.png", // Plano original
  "mainFeature": {
    // Feature principal
    "type": "image",
    "link": "v1747.../imagen.jpg"
  }
}
```

---

## üé® Ejemplo Completo de Proyecto

```json
{
  "id": "casa-moderna-belgrano",
  "name": "CASA MODERNA BELGRANO",
  "nameEn": "MODERN HOUSE BELGRANO",
  "m2": "180",
  "location": "Belgrano",
  "district": "CABA",
  "year": 2024,
  "showImg": "v1234567890/casa-belgrano-principal.jpg",
  "mainFeature": {
    "type": "image",
    "link": "v1234567890/casa-belgrano-principal.jpg"
  },
  "rowSpan": 3,
  "images": [{ "src": "v1234567890/imagen1.jpg" }, { "src": "v1234567890/imagen2.jpg" }, { "src": "v1234567890/imagen3.jpg" }],
  "description": "Descripci√≥n completa del proyecto en espa√±ol...",
  "descriptionEn": "Full project description in English...",
  "plantaSrc": "v1234567890/planta-proyecto.png",
  "plantaPreviaSrc": "v1234567890/planta-original.png"
}
```

---

## üöÄ Deployment Autom√°tico

### **Flujo Completo:**

```
1. Editas projects.json en GitHub
   ‚Üì
2. Haces commit
   ‚Üì
3. GitHub Actions se activa autom√°ticamente
   ‚Üì
4. Valida el JSON (campos, duplicados, etc.)
   ‚Üì
5. Ejecuta el linter
   ‚Üì
6. Build de producci√≥n
   ‚Üì
7. Verifica que el build sea exitoso
   ‚Üì
8. Deploy a Hostinger v√≠a FTP
   ‚Üì
9. ‚úÖ Sitio actualizado (3-5 minutos)
```

### **Configurar Secrets en GitHub:**

Para que el deploy funcione, necesitas configurar estos secrets:

1. Ve a tu repositorio en GitHub
2. Settings ‚Üí Secrets and variables ‚Üí Actions
3. Agrega estos secrets:

| Secret         | Descripci√≥n               | Ejemplo                 |
| -------------- | ------------------------- | ----------------------- |
| `FTP_SERVER`   | Servidor FTP de Hostinger | `ftp.tudominio.com`     |
| `FTP_USERNAME` | Usuario FTP               | `usuario@tudominio.com` |
| `FTP_PASSWORD` | Contrase√±a FTP            | `tu_password_seguro`    |

**‚ö†Ô∏è IMPORTANTE:** Nunca compartas estos secrets p√∫blicamente.

---

## üîç Validaci√≥n Autom√°tica

Antes de cada build, se valida autom√°ticamente:

### ‚úÖ **Validaciones de Campos:**

- Todos los proyectos tienen `id`, `name`, `showImg`, `images`
- El campo `images` es un array no vac√≠o
- Cada imagen tiene el campo `src`

### ‚úÖ **Validaciones de Unicidad:**

- No hay IDs duplicados
- No hay slugs duplicados (generados del nombre)

### ‚úÖ **Validaciones de Estructura:**

- El JSON es v√°lido (sin errores de sintaxis)
- Es un array de objetos
- Los campos tienen el tipo correcto

---

## üìù C√≥mo Agregar un Nuevo Proyecto

### **Opci√≥n A: Desde GitHub Web**

1. Abre `src/assets/data/projects.json` en GitHub
2. Clic en **"Edit"**
3. Copia uno de los proyectos existentes
4. Modifica los campos:
   - Cambia el `id` (debe ser √∫nico)
   - Actualiza `name`, `location`, etc.
   - Agrega las im√°genes de Cloudinary
5. **Commit changes**
6. Espera ~3-5 minutos ‚Üí ¬°Listo!

### **Opci√≥n B: Con el Script (Local)**

```bash
# Ejecutar script interactivo
npm run add:project

# Responder las preguntas:
# - Nombre del proyecto
# - M¬≤, ubicaci√≥n, a√±o
# - Im√°genes (Cloudinary IDs)
# - Descripciones

# Commit y push
git add src/assets/data/projects.json
git commit -m "feat: agregar nuevo proyecto [nombre]"
git push origin master
```

---

## ‚úèÔ∏è C√≥mo Editar un Proyecto Existente

1. Abre `src/assets/data/projects.json`
2. Busca el proyecto por su `id` o `name`
3. Modifica los campos necesarios
4. **NO cambies el `id`** (cambia la URL del proyecto)
5. Commit changes
6. Deploy autom√°tico en 3-5 minutos

**Ejemplo:**

```json
{
  "id": "reforma-palermo", // ‚õî NO CAMBIAR
  "name": "REFORMA PALERMO NUEVO", // ‚úÖ OK cambiar
  "m2": "50" // ‚úÖ OK cambiar
  // ... resto de campos
}
```

---

## üóëÔ∏è C√≥mo Eliminar un Proyecto

1. Abre `src/assets/data/projects.json`
2. Elimina el objeto completo del proyecto
3. **Verifica que el JSON siga siendo v√°lido** (comas, corchetes)
4. Commit changes

**‚ö†Ô∏è CUIDADO:** El proyecto y su URL dejar√°n de existir.

---

## üñºÔ∏è Subir Im√°genes a Cloudinary

Todas las im√°genes deben estar en Cloudinary:

1. Ve a [Cloudinary Dashboard](https://cloudinary.com)
2. Sube la imagen
3. Copia el **Public ID** (ej: `v1747070360/xaks7ffpmupmhqrs0xwc.jpg`)
4. √ösalo en el campo `showImg` o en `images[].src`

**Formato del Public ID:**

```
v1747070360/xaks7ffpmupmhqrs0xwc.jpg
‚îî‚îÄ versi√≥n ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ identificador ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îî ext ‚îò
```

---

## üîß Comandos √ötiles

```bash
# Validar proyectos localmente
npm run validate:projects

# Agregar proyecto interactivamente
npm run add:project

# Build con validaci√≥n
npm run build

# Build sin validaci√≥n (para testing)
npm run build:skip-validation

# Ver el build en el navegador
npm start
```

---

## üö® Soluci√≥n de Problemas

### **‚ùå Error: "ID duplicado"**

**Problema:** Dos proyectos tienen el mismo `id`

**Soluci√≥n:**

1. Busca el ID duplicado en el JSON
2. Cambia uno de ellos a un ID √∫nico
3. Vuelve a hacer commit

---

### **‚ùå Error: "Campo requerido faltante"**

**Problema:** Un proyecto no tiene `id`, `name`, `showImg` o `images`

**Soluci√≥n:**

1. Abre `src/assets/data/projects.json`
2. Agrega el campo faltante al proyecto
3. Commit changes

---

### **‚ùå Build falla en GitHub Actions**

**Problema:** El pipeline fall√≥

**Soluci√≥n:**

1. Ve a **Actions** en GitHub
2. Haz clic en el workflow fallido
3. Lee los logs para ver el error exacto
4. Corrige el error en `projects.json`
5. Haz commit de nuevo

---

### **‚ùå Deploy exitoso pero sitio no actualizado**

**Problema:** GitHub Actions dice "success" pero el sitio no cambi√≥

**Soluci√≥n:**

1. Limpia el cach√© del navegador (Ctrl+F5 o Cmd+Shift+R)
2. Verifica que las credenciales FTP sean correctas
3. Revisa los logs del paso "Deploy via FTP"
4. Contacta a soporte de Hostinger si persiste

---

## üìä Monitoreo del Deployment

### **Ver el Estado del Deploy:**

1. Ve a tu repositorio en GitHub
2. Haz clic en la pesta√±a **"Actions"**
3. Ver√°s la lista de todos los deployments

### **Estados Posibles:**

| Estado         | √çcono | Descripci√≥n      |
| -------------- | ----- | ---------------- |
| ‚úÖ Success     | üü¢    | Deploy exitoso   |
| ‚ùå Failure     | üî¥    | Fall√≥ (ver logs) |
| üü° In Progress | üü°    | Ejecut√°ndose     |
| ‚è∏Ô∏è Queued      | ‚ö™    | En cola          |

---

## üéØ Mejores Pr√°cticas

### ‚úÖ **DO (Hacer):**

- Validar localmente antes de hacer commit: `npm run validate:projects`
- Usar nombres descriptivos en los commits: `"feat: agregar proyecto Casa Moderna"`
- Probar en ambiente de desarrollo antes de deployar
- Mantener las im√°genes en Cloudinary organizadas
- Escribir descripciones claras y completas

### ‚ùå **DON'T (No hacer):**

- No cambiar el `id` de proyectos existentes (rompe URLs)
- No duplicar IDs
- No subir im√°genes muy pesadas sin optimizar
- No hacer commits directos a `master` sin validar
- No poner informaci√≥n sensible en las descripciones

---

## üîê Seguridad de Secrets

Los secrets de FTP est√°n protegidos:

- ‚úÖ Encriptados por GitHub
- ‚úÖ No se muestran en logs
- ‚úÖ Solo accesibles por workflows autorizados
- ‚úÖ Pueden ser rotados en cualquier momento

**Para rotar credentials:**

1. Settings ‚Üí Secrets ‚Üí Actions
2. Edita el secret
3. Pega la nueva contrase√±a
4. Save

---

## üìû Soporte

Si tienes problemas:

1. **Revisa esta documentaci√≥n** primero
2. **Ejecuta validaci√≥n local:** `npm run validate:projects`
3. **Revisa los logs** de GitHub Actions
4. **Verifica el JSON** en un validador: [jsonlint.com](https://jsonlint.com)

---

## üìù Ejemplo de Workflow Completo

### **Escenario: Agregar "Reforma N√∫√±ez"**

```bash
# 1. Opci√≥n A: Usar script
npm run add:project
# Responder preguntas...

# 2. Validar
npm run validate:projects

# 3. Commit y push
git add src/assets/data/projects.json
git commit -m "feat: agregar Reforma N√∫√±ez"
git push origin master

# 4. Esperar ~3-5 minutos
# GitHub Actions hace todo autom√°ticamente

# 5. Verificar
# - Ve a Actions en GitHub
# - Espera el ‚úÖ verde
# - Visita https://tudominio.com/reforma-nunez
```

---

## üîÑ Rollback (Revertir Cambios)

Si algo sale mal y necesitas volver atr√°s:

### **Opci√≥n 1: Desde GitHub Web**

1. Ve a la pesta√±a **"History"** del archivo
2. Haz clic en el commit que quieres restaurar
3. Clic en **"View file"**
4. Clic en **"..." ‚Üí Copy raw file**
5. Edita `projects.json` y pega el contenido anterior
6. Commit

### **Opci√≥n 2: Desde Git Local**

```bash
# Ver historial
git log src/assets/data/projects.json

# Revertir al commit anterior
git checkout [commit-hash] -- src/assets/data/projects.json

# Commit del rollback
git commit -m "revert: volver a versi√≥n anterior de proyectos"
git push origin master
```

---

## üé® Tips para Cloudinary

### **Optimizaci√≥n de Im√°genes:**

- Subir im√°genes en alta calidad (Cloudinary las optimiza)
- Formato recomendado: JPG para fotos, PNG para planos
- Tama√±o m√°ximo recomendado: 5000px ancho
- Cloudinary genera autom√°ticamente WebP y AVIF

### **Organizaci√≥n:**

Usa carpetas en Cloudinary:

```
proyectos/
  ‚îú‚îÄ‚îÄ reforma-palermo/
  ‚îÇ   ‚îú‚îÄ‚îÄ principal.jpg
  ‚îÇ   ‚îú‚îÄ‚îÄ cocina.jpg
  ‚îÇ   ‚îî‚îÄ‚îÄ bano.jpg
  ‚îú‚îÄ‚îÄ casa-moderna/
  ‚îî‚îÄ‚îÄ ...
```

---

## ‚ö° Performance

El sistema est√° optimizado para:

- ‚úÖ **SSR/Prerendering**: Todas las rutas se prerenderizan
- ‚úÖ **Lazy Loading**: Im√°genes cargan solo cuando se ven
- ‚úÖ **Cach√©**: Los proyectos se cachean en el navegador
- ‚úÖ **CDN**: Cloudinary sirve im√°genes optimizadas

---

## üìà M√©tricas

Cada deploy muestra:

- ‚è±Ô∏è Tiempo total de build
- üì¶ Tama√±o de los bundles
- ‚ö†Ô∏è Advertencias de presupuesto
- ‚úÖ/‚ùå Estado de validaciones

---

**Desarrollado con ‚ù§Ô∏è para MA Arquitectura**
